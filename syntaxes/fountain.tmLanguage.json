{
  "fileTypes": [
    "fountain"
  ],
  "name": "Fountain",
  "scopeName": "text.source.fountain",
  "uuid": "BA0B1FEB-1E9C-4283-8F3B-E80E7879EA91",
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "include": "#notes"
    },
    {
      "include": "#title_page_font"
    },
    {
      "include": "#title_page"
    },
    {
      "include": "#scene_headings_and_action"
    },
    {
      "include": "#transitions_and_action"
    },
    {
      "include": "#action_force"
    },
    {
      "include": "#dialogue"
    },
    {
      "include": "#block_action"
    }
  ],
  "repository": {
    "dialogue": {
      "contentName": "string",
      "begin": "[ \\t]*(((?!@)\\p{Lu}[^\\p{Ll}\\r\\n]*?)|((@)([^\\r\\n\\(\\^]*?)))(\\(.*?\\))?(\\s*\\^)?\\s*((\\[\\[.*)|(/\\*.*))?$",
      "end": "^[ ]?$",
      "beginCaptures": {
        "2": {
          "name": "variable.parameter.url.css",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            }
          ]
        },
        "4": {
          "name": "comment.block.fountain"
        },
        "5": {
          "name": "variable.parameter.url.css",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            }
          ]
        },
        "6": {
          "name": "constant.numeric.fountain"
        },
        "7": {
          "name": "comment.block.fountain"
        },
        "8": {
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            }
          ]
        }
      },
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "name": "entity.name.tag",
          "begin": "^[ \\t]*\\(",
          "end": "(\\)\\s*$|(?=^\\s*$))",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            },
            {
              "include": "#underline"
            },
            {
              "include": "#markup"
            }
          ]
        },
        {
          "include": "#markup"
        },
        {
          "include": "#underline"
        }
      ]
    },
    "block_action": {
      "begin": "(?=\\s*[^\\s]+.*$)",
      "end": "^[ ]*$",
      "patterns": [
        {
          "include": "#action_content"
        }
      ]
    },
    "comments": {
      "name": "comment.block.fountain",
      "begin": "\\s*?/\\*",
      "end": "\\*/\\s*",
      "patterns": [
        {
          "include": "#comments"
        }
      ]
    },
    "title_page_font": {
      "begin": "\\s*(?i)(font|font italic|font bold|font bold italic)(:)",
      "end": "((?=(?i)(title|credit|authors?|source|draft date|date|watermark|header|footer|contact|contact info|copyright|notes|font|font italic|font bold|font bold italic|revision|tl|tc|tr|cc|br|bl)(:))|(?=^\\s?$))",
      "name": "entity.name.tag",
      "beginCaptures": {
        "1": {
          "name": "variable.other.constant"
        },
        "2": {
          "name": "keyword.control"
        }
      },
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "include": "#underline"
        },
        {
          "include": "#markup"
        }
      ]
    },
    "title_page": {
      "begin": "\\s*(?i)(title|credit|authors?|source|draft date|date|watermark|header|footer|contact|contact info|copyright|notes|revision|tl|tc|tr|cc|br|bl)(:)",
      "end": "((?=(?i)(title|credit|authors?|source|draft date|date|watermark|header|footer|contact|contact info|copyright|notes|font|font italic|font bold|font bold italic|revision|tl|tc|tr|cc|br|bl)(:))|(?=^\\s?$))",
      "name": "markup.deleted.diff",
      "beginCaptures": {
        "1": {
          "name": "variable.other.constant"
        },
        "2": {
          "name": "keyword.control"
        }
      },
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "include": "#underline"
        },
        {
          "include": "#markup"
        }
      ]
    },
    "scene_headings_and_action": {
      "begin": "(?i)[ \\t]*([.](?=[\\w\\(\\p{L}])(?:\\(室内\\)|\\(室外\\))?|(?:int|ext|est|int[.]?\\/ext|i[.]?\\/e)[. ]\\s*(?:\\(室内\\)|\\(室外\\))?)([^-]*)([-–—−][^#]*)?((#)\\s*([^\\s].*)(#))?\\s*((\\[\\[.*)|(/\\*.*))?$",
      "end": "^[ ]*$",
      "beginCaptures": {
        "1": {
          "name": "keyword.other.class"
        },
        "2": {
          "name": "token.error-token",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            }
          ]
        },
        "3": {
          "name": "keyword.other.class",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            }
          ]
        },
        "5": {
          "name": "comment.block.fountain"
        },
        "6": {
          "name": "constant.numeric.scene.fountain"
        },
        "7": {
          "name": "comment.block.fountain"
        },
        "8": {
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            }
          ]
        }
      },
      "patterns": [
        {
          "include": "#action_content"
        }
      ]
    },
    "sections": {
      "name": "support.variable.magic.python",
      "begin": "[ \\t]*(#+)(?:\\s*)",
      "end": "$|(?<=^[^(/\\*)]*\\*\\s*/)|(?<=^[^(\\[\\[)]*\\]\\]\\s*)|(?<=^[^_]*_)|(?<=^[^\\*]*\\*{1,3})",
      "beginCaptures": {
        "1": {
          "name": "comment.block.fountain"
        }
      },
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "include": "#underline"
        },
        {
          "include": "#markup"
        }
      ]
    },
    "synopses": {
      "name": "constant.numeric.scene.fountain",
      "begin": "\\s*(=)",
      "end": "$|(?<=^[^(/\\*)]*\\*\\s*/)|(?<=^[^(\\[\\[)]*\\]\\]\\s*)|(?<=^[^_]*_)|(?<=^[^\\*]*\\*{1,3})",
      "beginCaptures": {
        "1": {
          "name": "comment.block.fountain"
        }
      },
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "include": "#underline"
        },
        {
          "include": "#markup"
        }
      ]
    },
    "transitions_and_action": {
      "begin": "\\s*((>)[^\\n\\r]*(?!<[ \\t]*)$)|([A-Z ]+?TO:((\\[\\[|/\\*).*)?(?<!\\s)$)",
      "end": "^[ ]*$",
      "beginCaptures": {
        "1": {
          "name": "variable.other.constant",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            },
            {
              "include": "#underline"
            },
            {
              "include": "#markup"
            }
          ]
        },
        "2": {
          "name": "comment.block.fountain"
        },
        "3": {
          "name": "variable.other.constant",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            },
            {
              "include": "#underline"
            },
            {
              "include": "#markup"
            }
          ]
        }
      },
      "patterns": [
        {
          "include": "#action_content"
        }
      ]
    },
    "center": {
      "name": "token.warn-token",
      "begin": "^\\s*(>)",
      "end": "(<)\\s*$",
      "captures": {
        "1": {
          "name": "comment.block.fountain"
        }
      },
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "include": "#underline"
        },
        {
          "include": "#markup"
        }
      ]
    },
    "notes": {
      "name": "comment.block",
      "begin": "\\s*?\\[{2}",
      "end": "\\]{2}\\s*",
      "patterns": [
        {
          "include": "#notes"
        },
        {
          "include": "#underline"
        },
        {
          "include": "#markup"
        }
      ]
    },
    "pagebreaks": {
      "name": "token.error-token",
      "begin": "\\s*={3,}(?=((\\[\\[.*\\]\\](\\s*|(=*)))|(/\\*.*\\*/(\\s*|(=*))))*\\s*($|(\\[\\[[^(\\]\\])]*$)|(/\\*[^(\\*/)]*$)))",
      "end": "$|(?<=^[^(/\\*)]*\\*\\s*/)|(?<=^[^(\\[\\[)]*\\]\\]\\s*)|(?<=^[^_]*_)|(?<=^[^\\*]*\\*{1,3})",
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        }
      ]
    },
    "lyrics": {
      "name": "markup.italic string",
      "begin": "\\s*(~)",
      "end": "$|(?<=^[^(/\\*)]*\\*\\s*/)|(?<=^[^(\\[\\[)]*\\]\\]\\s*)|(?<=^[^_]*_)|(?<=^[^\\*]*\\*{1,3})",
      "beginCaptures": {
        "1": {
          "name": "comment.block.fountain"
        }
      },
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "include": "#underline"
        },
        {
          "include": "#markup"
        }
      ]
    },
    "comment_begin_block": {
      "begin": "^\\s*?(?=(/\\*)|(\\[\\[))",
      "end": "^[ ]*$",
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "include": "#underline"
        },
        {
          "include": "#markup"
        }
      ]
    },
    "action_force": {
      "begin": "\\s*(\\!)",
      "end": "^[ ]*$",
      "beginCaptures": {
        "1": {
          "name": "comment.block.fountain"
        }
      },
      "patterns": [
        {
          "include": "#action_content"
        }
      ]
    },
    "action_content": {
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "include": "#sections"
        },
        {
          "include": "#pagebreaks"
        },
        {
          "include": "#synopses"
        },
        {
          "include": "#center"
        },
        {
          "include": "#lyrics"
        },
        {
          "include": "#underline"
        },
        {
          "include": "#markup"
        },
        {
          "name": "action.line.fountain",
          "match": "\\s*([^ ].*)$",
          "captures": {
            "1": {
              "patterns": [
                {
                  "include": "#comments"
                },
                {
                  "include": "#notes"
                },
                {
                  "include": "#markup"
                },
                {
                  "include": "#underline"
                }
              ]
            }
          }
        }
      ]
    },
    "underline": {
      "name": "markup.underline.fountain",
      "begin": "(?<!\\\\)_",
      "end": "(?<!\\\\)_",
      "patterns": [
        {
          "include": "#comments"
        },
        {
          "include": "#notes"
        },
        {
          "include": "#markup"
        }
      ]
    },
    "markup": {
      "patterns": [
        {
          "name": "markup.bold.fountain",
          "begin": "(?<!\\\\|/)(\\*{2,3})(?!/)",
          "captures": {
            "1": {
              "name": "punctuation.definition.markup.bold.fountain"
            }
          },
          "end": "(?<!\\\\|/)(\\1)(?!/)",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            },
            {
              "include": "#underline"
            },
            {
              "applyEndPatternLast": 1,
              "begin": "(?=<[^>]*?>)",
              "end": "(?<=>)",
              "patterns": [
                {
                  "include": "text.html.basic"
                }
              ]
            }
          ]
        },
        {
          "name": "markup.italic.fountain",
          "begin": "(?<!\\\\|/)(\\*)(?!/)",
          "captures": {
            "1": {
              "name": "punctuation.definition.markup.italic.fountain"
            }
          },
          "end": "(?<!\\\\|/)(\\1)(?!/)",
          "patterns": [
            {
              "include": "#comments"
            },
            {
              "include": "#notes"
            },
            {
              "applyEndPatternLast": 1,
              "begin": "(?=<[^>]*?>)",
              "end": "(?<=>)",
              "patterns": [
                {
                  "include": "text.html.basic"
                }
              ]
            }
          ]
        }
      ]
    },
    "link-inline": {
      "captures": {
        "1": {
          "name": "punctuation.definition.tag"
        },
        "3": {
          "name": "punctuation.definition.tag"
        },
        "5": {
          "name": "punctuation.definition.tag"
        },
        "6": {
          "name": "punctuation.definition.tag"
        },
        "10": {
          "name": "punctuation.definition.tag"
        },
        "4": {
          "name": "markup.underline.link.fountain",
          "patterns": [
            {
              "include": "#markup"
            },
            {
              "include": "#link-inline"
            }
          ]
        },
        "7": {
          "name": "keyword"
        }
      },
      "match": "(!)?(\\[?(\\[)([^\\]\\[]*\\[?[^\\]\\[]*\\]?[^\\]\\[]*)(\\])(\\()(.+?)(?:\\s+([\"'])(.*?)\\4)?(\\)))",
      "name": "meta.link.inline.fountain"
    },
    "test2": {
      "name": "variable.other.constant",
      "begin": "^(?!\\s*$).*$",
      "while": "^(?!\\s*$).*$"
    }
  }
}